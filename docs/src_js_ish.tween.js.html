<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ish.js | Source: src/js/ish.tween.js</title>
    <link type="text/css" rel="stylesheet" href="main.css">
</head>

<body>
<div class="l-header" data-scrollpop="header">
    <header data-scrollpop-bar>
        <div class="l-header__content" data-scrollpop-content>
            <h1><a href="/js/docs/">ish.js API Doc <span>(alpha)</span></a></h1>

            <button data-ui-main-nav--toggle class="c-main-nav__toggle icon--menu">
              <span></span>
              <span></span>
              <span></span>
            </button>
            
            <nav data-ui-main-nav class="c-main-nav">
                <div class="c-main-nav__inner">
                    
<!--<h3 class="applicationName"><a href="index.html"></a></h3> -->

<ul class="c-menu c-menu--alpha">

    <li data-name="ish">
        
        <a href="ish.html">ish</a>
        
        
        
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Methods</span></li>
        
            <li data-name="ish.ajax"><a href="ish.html#.ajax">ajax</a></li>
            
            <li data-name="ish.ish"><a href="ish.html#.ish">ish</a></li>
            
            <li data-name="ish#extends"><a href="ish.html#extends">extends</a></li>
            
            
        </ul>
        
    </li>

    <li data-name="ishObject">
        
        <a href="ishObject.html">ishObject</a>
        
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Properties</span></li>
        
            <li data-name="ishObject.context"><a href="ishObject.html#.context">context</a></li>
            
            <li data-name="ishObject.length"><a href="ishObject.html#.length">length</a></li>
            
            <li data-name="ishObject.selector"><a href="ishObject.html#.selector">selector</a></li>
            
            
        </ul>
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Methods</span></li>
        
            <li data-name="ishObject.addClass"><a href="ishObject.html#.addClass">addClass</a></li>
            
            <li data-name="ishObject.attr"><a href="ishObject.html#.attr">attr</a></li>
            
            <li data-name="ishObject.css"><a href="ishObject.html#.css">css</a></li>
            
            <li data-name="ishObject.dimension"><a href="ishObject.html#.dimension">dimension</a></li>
            
            <li data-name="ishObject.forEach"><a href="ishObject.html#.forEach">forEach</a></li>
            
            <li data-name="ishObject.hasClass"><a href="ishObject.html#.hasClass">hasClass</a></li>
            
            <li data-name="ishObject.height"><a href="ishObject.html#.height">height</a></li>
            
            <li data-name="ishObject.indexOf"><a href="ishObject.html#.indexOf">indexOf</a></li>
            
            <li data-name="ishObject.invoke"><a href="ishObject.html#.invoke">invoke</a></li>
            
            <li data-name="ishObject.nth"><a href="ishObject.html#.nth">nth</a></li>
            
            <li data-name="ishObject.off"><a href="ishObject.html#.off">off</a></li>
            
            <li data-name="ishObject.offset"><a href="ishObject.html#.offset">offset</a></li>
            
            <li data-name="ishObject.on"><a href="ishObject.html#.on">on</a></li>
            
            <li data-name="ishObject.removeClass"><a href="ishObject.html#.removeClass">removeClass</a></li>
            
            <li data-name="ishObject.serialize"><a href="ishObject.html#.serialize">serialize</a></li>
            
            <li data-name="ishObject.trigger"><a href="ishObject.html#.trigger">trigger</a></li>
            
            <li data-name="ishObject.width"><a href="ishObject.html#.width">width</a></li>
            
            
        </ul>
        
    </li>

    <li data-name="ish.tween">
        
        <a href="ish.tween.html">ish.tween</a>
        
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Properties</span></li>
        
            <li data-name="ish.tween.frameCount"><a href="ish.tween.html#.frameCount">frameCount</a></li>
            
            <li data-name="ish.tween.this.active"><a href="ish.tween.html#.this.active">this.active</a></li>
            
            <li data-name="ish.tween.this.frame"><a href="ish.tween.html#.this.frame">this.frame</a></li>
            
            
        </ul>
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Methods</span></li>
        
            <li data-name="ish.tween.this.nextFrame"><a href="ish.tween.html#.this.nextFrame">this.nextFrame</a></li>
            
            <li data-name="ish.tween.this.start"><a href="ish.tween.html#.this.start">this.start</a></li>
            
            <li data-name="ish.tween.this.stop"><a href="ish.tween.html#.this.stop">this.stop</a></li>
            
            
        </ul>
        
    </li>

    <li data-name="ish.easing">
        
        <a href="ish.easing.html">ish.easing</a>
        
        <!--<span class="static">static</span>-->
        
        
        
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Methods</span></li>
        
            <li data-name="ish.easing.easeInCirc"><a href="ish.easing.html#.easeInCirc">easeInCirc</a></li>
            
            <li data-name="ish.easing.easeInCubic"><a href="ish.easing.html#.easeInCubic">easeInCubic</a></li>
            
            <li data-name="ish.easing.easeInExpo"><a href="ish.easing.html#.easeInExpo">easeInExpo</a></li>
            
            <li data-name="ish.easing.easeInOutCirc"><a href="ish.easing.html#.easeInOutCirc">easeInOutCirc</a></li>
            
            <li data-name="ish.easing.easeInOutCubic"><a href="ish.easing.html#.easeInOutCubic">easeInOutCubic</a></li>
            
            <li data-name="ish.easing.easeInOutExpo"><a href="ish.easing.html#.easeInOutExpo">easeInOutExpo</a></li>
            
            <li data-name="ish.easing.easeInOutQuad"><a href="ish.easing.html#.easeInOutQuad">easeInOutQuad</a></li>
            
            <li data-name="ish.easing.easeInOutQuart"><a href="ish.easing.html#.easeInOutQuart">easeInOutQuart</a></li>
            
            <li data-name="ish.easing.easeInOutQuint"><a href="ish.easing.html#.easeInOutQuint">easeInOutQuint</a></li>
            
            <li data-name="ish.easing.easeInOutSine"><a href="ish.easing.html#.easeInOutSine">easeInOutSine</a></li>
            
            <li data-name="ish.easing.easeInQuad"><a href="ish.easing.html#.easeInQuad">easeInQuad</a></li>
            
            <li data-name="ish.easing.easeInQuart"><a href="ish.easing.html#.easeInQuart">easeInQuart</a></li>
            
            <li data-name="ish.easing.easeInQuint"><a href="ish.easing.html#.easeInQuint">easeInQuint</a></li>
            
            <li data-name="ish.easing.easeInSine"><a href="ish.easing.html#.easeInSine">easeInSine</a></li>
            
            <li data-name="ish.easing.easeOutCirc"><a href="ish.easing.html#.easeOutCirc">easeOutCirc</a></li>
            
            <li data-name="ish.easing.easeOutCubic"><a href="ish.easing.html#.easeOutCubic">easeOutCubic</a></li>
            
            <li data-name="ish.easing.easeOutExpo"><a href="ish.easing.html#.easeOutExpo">easeOutExpo</a></li>
            
            <li data-name="ish.easing.easeOutQuad"><a href="ish.easing.html#.easeOutQuad">easeOutQuad</a></li>
            
            <li data-name="ish.easing.easeOutQuart"><a href="ish.easing.html#.easeOutQuart">easeOutQuart</a></li>
            
            <li data-name="ish.easing.easeOutQuint"><a href="ish.easing.html#.easeOutQuint">easeOutQuint</a></li>
            
            <li data-name="ish.easing.easeOutSine"><a href="ish.easing.html#.easeOutSine">easeOutSine</a></li>
            
            <li data-name="ish.easing.linear"><a href="ish.easing.html#.linear">linear</a></li>
            
            
        </ul>
        
    </li>

    <li data-name="ish.responsive">
        
        <a href="ish.responsive.html">ish.responsive</a>
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Events</span></li>
            
                <li data-name="ish.responsive.event:onBreakpoint"><a href="ish.responsive.html#.event:onBreakpoint">onBreakpoint</a></li>
            
            
        </ul>
        
        
        
        
        <ul class="c-menu__members">
            <li><span class="c-menu__subtitle">Methods</span></li>
        
            <li data-name="ish.responsive.this.destroy"><a href="ish.responsive.html#.this.destroy">this.destroy</a></li>
            
            
        </ul>
        
    </li>

</ul>

                </div>
                <button data-ui-main-nav--toggle class="c-main-nav__close">Close Menu</button>
            </nav>
         </div>
    </header> 
</div> 
<div class="l-doc" role="document">
    <main class="l-main">
            <div class="l-main__content">
                



	
    <section class="c-source-content">
        <article>
            <pre class="prettyprint source linenums"><code>// SINGELTON
var tweener = function() {
	var intervalRate = 0.06; // 60FPS.

	this.queue = [];
	this.queueHash = [];
	this.active = false;
	this.timer = null;

	this.createTween = function(start, end, frameCount, easingfn) {
		// return array of tween coordinate data (start->end)
		var tween = [start];
		var diff = end - start;
		for (var i = 0; i &lt; frameCount; i++) {
			tween[i] = {};
			var valueChange = tween[i - 1] ? tween[i - 1].data : 0;

			// if it's the last frame use the end value or else pass it through the easing functions.
			tween[i].data = i === frameCount - 1 ? end : $.easing[easingfn](i, start, diff, frameCount);
			tween[i].event = null;
		}
		return tween;
	};

	this.enqueue = function(o, fMethod, fOnComplete) {
		// add object and associated methods to animation queue
		this.queue.push(o);
		o.active = true;
	};

	this.start = function() {
		if (this.timer || this.active) return false; // animator.start(): already active
		// animator.start() : only if started
		this.active = true;
		this.timer = setInterval(animate, 1 / intervalRate);
	};

	this.clear = function() {
		// reset some things, clear for next batch of animations
		clearInterval(this.timer);
		this.timer = null;
		this.active = false;
		this.queue = [];
	};

	var animate = function() {
		var active = 0;
		for (var i = 0, j = this.queue.length; i &lt; j; i++) {
			if (this.queue[i].active) {
				//console.log(this.queue[i]);
				this.queue[i].nextFrame();
				active++;
			}
		}
		if (active === 0 &amp;&amp; this.timer) {
			// all animations finished
			this.clear();
		}
	}.bind(this);

	return this;
}.call({});

/**
 * Tweens values between two points to be used in Javascript animation. Animation works a little differently to jQuery's animat() method, this simply provides callback functions that fires on a timer and provides parameters for that tweens frames animation values. You can then write your own CSS manipulation routine within the callbacks. 
 * @name  ish.tween
 * @constructor
 * @param {Object} options
 * @param {Number} options.from The start value of the tween.
 * @param {Number} options.to The end value of the tween.
 * @param {String} options.easing Specify an easing equation for the tween.
 * @param {Function} options.onBeforeTween A callback function fired before each tween begins. 
 * @param {Function} options.onTween A callback function fired each tween frame.
 * @param {Function} options.onComplete A callback function fired when the tween is complete.
 * @return {ish.tween} Chainable, returns the module instance.
 * @example
 * var animateOpacity = $.tween({
 *   from: 1,
 *   to: 0,
 *   duration: 1000,
 *   easing: 'linear',
 *   onBeforeTween: function (){
 *   	//onBeforeTween operations
 *   },
 *   ontween: function (value){
 *   	ish('.selector').css('opacity', value)
 *   },
 *   oncomplete: function (){ 
 *   	//onComplete operations
 *   }
 * }).start();
 */
var tween = function(animationParams) {

	/*
	animationParams = {
	from: 200,
	to: 300,
	easing: 'default',
	ontween: function(value) { ... }, // method called each time
	oncomplete: function() { ... } // when finished
	}
	*/
	if (typeof animationParams.easing == 'undefined') {
		animationParams.easing = 'default';
	}
	var onBeforeTween = (animationParams.onBeforeTween || null);
	var ontween = (animationParams.ontween || null);
	var oncomplete = (animationParams.oncomplete || null);

	var time = (animationParams.duration || 500);
	var fps = (1 / animationParams.fps || 1 / 0.06);
	/**
	 * The number of frames.
	 * @memberOf ish.tween
	 */
	var frameCount = Math.ceil(time / fps);
	//var delta = (animationParams.to - animationParams.from) / time / 0.06;
	//var delta = 100 / frameCount;
	var easingfn = (animationParams.easing || 'linear');
	var tween = tweener.createTween(animationParams.from, animationParams.to, frameCount, easingfn);

	/**
	 * The current frame number.
	 * @memberOf ish.tween
	 */
	this.frame = 0;
	/**
	 * If the tween is animating.
	 * @memberOf ish.tween
	 */
	this.active = false;

	/**
	 * Moves the tween to the next frame or the specified interval.
	 * @memberOf ish.tween
	 * @param {Int} frameNumber The frame number you wish to skip to.
	 * @return {ish.tween}     Chainable, returns the module instance. 
	 * @example
	 * animateOpacity.start();
	 * animateOpacity.stop();
	 * 
	 * // move to the next frame
	 * animateOpacity.nextFrame();
	 * // skip to a specific tween frame
	 * animateOpacity.nextFrame(500);
	 *    
	 */
	this.nextFrame = function(frameNumber) {
		// generic animation method
		if (this.active) {
			if (ontween &amp;&amp; tween[this.frame]) ontween(tween[this.frame].data);

			if (this.frame++ >= frameCount - 1) {
				this.active = false;
				this.frame = 0;
				if (oncomplete) oncomplete();
			}
		}
		return this;
	};

	/**
	 * Starts the tween.
	 * @memberOf ish.tween
	 * @return {ish.tween}     Chainable, returns the module instance.
	 * @example
	 * animateOpacity.start();
	 */
	this.start = function() {
		//console.log('Animation  this.start');
		if (onBeforeTween) onBeforeTween();
		// add this to the main animation queue
		tweener.enqueue(this, this.nextFrame, oncomplete);
		if (!tweener.active) tweener.start();
		return this;
	};

	/**
	 * Stops the tween.
	 * @memberOf ish.tween
	 * @param {Boolean} skipToEnd Set to true to end the tween.  
	 * @return {ish.tween} Chainable, returns the module instance.
	 * @example
	 * // stop the animation at the current frame.
	 * animateOpacity.stop();
	 * // stop the animation and skip to the end of the tween.
	 * animateOpacity.stop(true);
	 * 
	 */
	this.stop = function(skipToEnd) {
		if (skipToEnd) {
			this.frame = frameCount - 1;
			this.nextFrame();
		} else {
			this.active = false;
		}
		return this;
	};

	// return publics
	return this;
};
$.tween = function(animationParams) {
	return tween.call({}, animationParams);
};</code></pre>
        </article>
    </section>




            </div>
    </main>
</div>

    <!-- <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri Dec 23 2016 20:43:37 GMT+1100 (AUS Eastern Daylight Time)
    </footer> -->
<script src="../dist/ish.min.js"> </script>
<script src="main.js"> </script>

</body>
</html>
