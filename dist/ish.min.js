var ish=function(t,e,r){function n(t,e,n){var i=e[n];null!==i&&void 0!==i&&(i.constructor===Object||Array.isArray(i)?t[n]=r[a](t[n]||{},i):t[n]=i)}var i={},s="forEach",a="extend",r=(t.createElement("i"),function(r,n,s){n=n||t;var a;if(r instanceof Node||r===e||r===t)a=[r],r=s||r;else if(n.length){a=[];for(var o,u=0;u<n.length;u++){o=n[u].querySelectorAll(r||"☺");for(var h=0;h<o.length;h++)a.push(o[h])}}else a=n.querySelectorAll(r||"☺");for(var l=a.length,c=Object.create(i),f=0;f<l;f++)c[f]=a[f];return c.length=l,c.selector=r,c.context=n,c});r.fn={ishObject:i},i.nth=function(t){return r(this[t],null,this.selector)},i[s]=function(t,e){e=e||this;var n,i=0,s=this.length;for(i;i<s;i++)n=r(this[i],null,this.selector),t.call(e,n,i);return this},i.indexOf=function(t){var e=0,r=this.length;for(e;e<=r;e++){var n=this[e];if(n===t)return e;if(!n)return-1}},i.attr=function(t,e){var r;return"string"==typeof e?(this[s](function(r){r[0].setAttribute(t,e)}),r=this):this[0]&&(r=this[0].getAttribute(t)),r},r[a]=function(){for(var t=arguments,e=t[0],i=1;i<t.length;i++){var s=t[i];if(Array.isArray(e))for(var o=0;o<s.length;o++)null!==s[o]&&void 0!==s[o]&&(s[o].constructor===Object?e[o]=r[a](e[o]||{},s[o]):Array.isArray(s[o])?e[o]=r[a](e[o]||[],s[o]):e[o]=s[o]);else if(e.constructor===Object){var u=Object.getOwnPropertyNames(s);for(var h in s){var l=u.indexOf(h);u.splice(l,1),n(e,s,h)}for(var c=0;c<u.length;c++)n(e,s,u[c])}}return e},i.offset=function(){var t=0,e=0;return this[0].offsetParent&&(t=this[0].offsetLeft,e=this[0].offsetTop),{left:t,top:e}},i.dimension=function(r,n,i){var s,a=this[0];this.selector!==(e||t)&&(s=a.style.display,"none"===s&&(a.style.display="block"));var o=0,u=0,h=0;return n&&(u="height"===r?this.css("marginTop"):this.css("marginLeft"),h="height"===r?this.css("marginBottom"):this.css("marginRight"),o=parseInt(u)+parseInt(h)),o+=a===e?"height"===r?a.outerHeight:a.outerWidth:i?"height"===r?a.clientHeight:a.clientWidth:"height"===r?a.offsetHeight:a.offsetWidth,this.selector!==(e||t)&&"none"===s&&(a.style.display="none"),o},i.css=function(t,r){if("object"==typeof t)for(var n in t)this.css(n,t[n]);else{if(!r){for(var i=t,a=0,o=0;o<t.length;o++){var u=t.charAt(o);if(u===u.toUpperCase()){i=t.slice(a,o)+"-"+t.slice(o).toLowerCase(),a=o;break}}var r=this[0].style[t]||e.getComputedStyle(this[0]).getPropertyValue(i);return r}this[s](function(e){e[0].style[t]=r})}return this},i.on=function(t,e,n){return n?this[s](function(i){var a=i[0],o=a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector||a.matchesSelector||function(t){var e=a,n=r(t),i=!1;return n[s](function(t){t[0]===e&&(i=!0)}),i};a.delegates=a.delegates||[];var u={f:e,e:function(t){o.call(t.target,n)&&(t.delegateTarget=this,e.call(this,t))}};a.delegates.push(u),a.addEventListener(t,u.e)}):this[s](function(r){r[0].addEventListener(t,e,!1)},this),this},i.off=function(t,e){return this[s](function(r){r[0].removeEventListener(t,e,!1);var n=r[0].delegates;n&&n[s](function(n,i){n.f===e&&(r.off(t,n.e),r[0].delegates.splice(i-1,i))},this)}),this},i.trigger=function(e,r){return this[s](function(n){var i=t.createEvent("HTMLEvents");i.initEvent(e,!0,!0),i.data=r||{},i.eventName=e,n[0].dispatchEvent(i)}),this},i.height=function(t,e){return this.dimension("height",t,e)},i.width=function(t,e){return this.dimension("width",t,e)},r.ajax=function(t){var e=r.extend({type:"GET",url:"",success:null,error:null,data:"",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"}},t),n=new XMLHttpRequest;n.open(e.type,encodeURI(e.url));var i=e.success,s=e.error,a=e.headers;for(var o in a)n.setRequestHeader(o,a[o]);return n.onload=function(){200===n.status?i&&i(n.responseText):s&&s(n.statusText,n.status)},n.send(e.data),n};var o="hasClass",u="addClass",h="removeClass";i[o]=function(t){var e=!1;return this[s](function(r){RegExp(" "+t+" ").test(" "+r[0].className+" ")&&(e=!0)}),e},i[h]=function(t){return this[s](function(e){if(e.hasClass(t)){for(var r=" "+e[0].className.replace(/[\t\r\n]/g," ")+" ";r.indexOf(" "+t+" ")>=0;)r=r.replace(" "+t+" "," ");e[0].className=r.replace(/^\s+|\s+$/g,"")}}),this},i[u]=function(t){return this[s](function(e){e.hasClass(t)||(e[0].className+=" "+t)}),this},r.fn.emitter={log:[],emit:function(t,e){var n=this.listeners[t];if(!n)return this;for(var i in n)n[i].call(this,e);return r.fn.emitter.log!==!1&&r.fn.emitter.log.push({type:t,arguments:e}),this},subscribe:function(t,e){return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this},unsubscribe:function(t,e){var r=this.listeners[t];if(r){var n=r.indexOf(e);r.splice(n,1)}return this},flush:function(){return this.listeners={},this}},r.emitter=function(){var t=Object.create(r.fn.emitter);return t.listeners={},t},function(){var t,n,i=[],s=function(t){a()},a=function(){t=e.innerWidth,n=e.innerHeight,i.forEach(function(e,r){var i,s;e.breakpoints.forEach(function(r,a){var o=r.name,u=r.width,h=r.height;e.state=e.state||[];var l=!isNaN(u)&&t>u,c=!isNaN(h)&&n>h;l?(i=o,s=0):c&&(i=o,s=1)}),(i&&null!==s&&e.state[s]!==i||""===i)&&(e.state[s]=i,e._this["break"]=e.state[s],e._this.emit("onMediaBreak",{name:e.state[s]}))})};r.fn.responsive={add:function(t){return i.push(t),a(),this},remove:function(t){return i.forEach(function(e,r){e===t&&i.splice(r,1)}),this}},a(),r(e).on("resize",s)}(),r.responsive=function(t){var e=Object.create(r.fn.responsive);ish.extend(e,ish.emitter());var n=r.extend({_this:e,breakpoints:[{name:"mobile",width:0},{name:"tablet",width:640},{name:"desktop",width:1024}],eventPrefix:"ish.responsive"},t||{});return e.destroy=function(){return e.remove(n),null},e.add(n),e},r.resolveObjectPath=function(t,e){e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var r=e.split("."),n=0,i=r.length;n<i;++n){var s=r[n];if(!(s in t))return;t=t[s]}return t},r.setPathByString=function(t,e,r){for(var n=e.split("."),i=t,s=0;s<n.length;s++){if(s===n.length-1)return i[n[s]]=r,i[n[s]];i[n[s]]||(i[n[s]]={}),i=i[n[s]]}},r.store={data:{},states:{},flush:function(){return this.states={},this.data={},this},createDataState:function(t,e){var n=this.data[t]=r.emitter();return n.actions={},n.store=null,n.model=null,e.call(n),n},createComState:function(t,e){if("string"==typeof t){this.states[t]||(this.states[t]=[]);var n=r.emitter();return n.actions={},e.call(n),this.states[t].push(n),n}return e.call(t),t}};var l=r.bindAttrName="ish-bind",c=t.createElement("div");return r.renderTemplate=function(t,e){c.insertAdjacentHTML("afterbegin",t);var n=r("["+l+"]",c);n.forEach(function(t){r.renderBind(t,e)});var i=c.removeChild(c.firstChild);return i},r.updateTemplate=function(t,e){var n=function(t){r.renderBind(t,e)};for(var i in e)r("["+l+'*="'+i+'"]',t).forEach(n);return r},r.renderBind=function(t,e){for(var n=t.attr(l).split(" "),i=0;i<n.length;i++){var s=n[i].split(":"),a=s[0].trim(),o=s[1].trim(),u=t[0][a],h=r.resolveObjectPath(e,o);h&&u!==h&&(t[0][a]=h)}},r.bindToObject=function(t,e){for(var n=t.attr(l).split(" "),i=0;i<n.length;i++){var s=n[i].split(":"),a=s[0].trim(),o=s[1].trim(),u=t[0][a];u&&r.setPathByString(e,o,u)}return this},function(){function n(t,e){for(var r={values:[],index:[]},n=0;n<e.length;n++)e[n].match(t)&&(r.index.push(n),r.values.push(e[n]));return r.index.length?r:-1}function i(t,e,r){var n=this.routes;n.before&&n.before(r),n[t].enter(e,r),n.after&&n.after(r)}function s(t,e){t=t||"";var r,s=Object.keys(this.routes),o=[],u=s.filter(function(t){return"*"===t.substr(t.length-1)||(o.push(t),!1)}),h=o.indexOf(t);if(h>=0)r=o[h];else{var l=t.split("/");l.shift();var c=n(l[0],o),f=c.index,v=c.values;if(f&&f.length>1){for(var d,g={index:[],values:[]},p=0,m=0;m<v.length;m++){var b=v[m].split("/");b.shift();var y=0;if(b.length===l.length)for(var x=0;x<b.length;x++)b[x]===l[x]&&y++,y>p&&(p=y,d=m)}c.index[d]&&(g.index.push(c.index[d]),g.values.push(c.values[d])),c=g}if(c!==-1){if(0===c.index.length)return this.routes.notFound(t),void this.emit("ROUTE_NOT_FOUND",{route:t});c.index.length>1&&console.error("More than 1 route found"),this.slugs=a(c,l),r=c.values[0]}}if(this.current){var O=this.routes[this.current];O&&O.leave&&O.leave();for(var E=0;E<u.length;E++)if(0===this.current.indexOf(u[E].replace("*",""))){var N=this.routes[u[E]].leave;N&&N()}}for(var A,R=0;R<u.length;R++)0===t.indexOf(u[R].replace("*",""))&&(i.call(this,u[R],this.slugs,e),A={route:u[R],previousRoute:this.current,slugs:this.slugs});return r&&(i.call(this,r,this.slugs||null,e),A={route:t,previousRoute:this.current,slugs:this.slugs}),this.current=t,A}function a(t,e){var r=!1,n=t.values[0].split("/");n.shift();for(var i={},s=1;s<n.length;s++){var a=n[s].charAt(0)+n[s].charAt(n[s].length-1);if("{}"===a){r=!0;var o=n[s].slice(1,-1),u=e[s];i[o]=u}}return r?i:null}function o(){var t=JSON.stringify({data:r.store.data,states:r.store.states});localStorage.setItem(this.current,t)}var u=e.history;r.fn.router={addRoute:function(t,e){return this.routes[t]=e,this},removeRoute:function(t){return delete this.routes[t],this},flushRoutes:function(){return this.routes={},this},navigate:function(t){o.call(this);var e=s.call(this,t);return u.pushState(e,"",this.current),this.emit("ON_NAVIGATE",e),this},destroy:function(){return r(e).off("popstate",this.popHandler),null}};var h=function(e){o.call(this);var r,n;if(history.state){var i=history.state;n=JSON.parse(localStorage.getItem(i.route)),r=s.call(this,i.route,n)}else currentLocation=t.URL.replace(this.baseURL,""),r=s.call(this,currentLocation);return this.emit("ON_POP",r),n};r.router=function(n){var i=Object.create(r.fn.router);i=ish.extend({},ish.emitter(),i,n);var a=t.URL.replace(i.baseURL,"");return i.popHandler=h.bind(i),r(e).on("popstate",i.popHandler),s.call(i,a),u.replaceState({route:i.current,slugs:i.slugs},"",i.current),i}}(),r}(document,this);
//# sourceMappingURL=ish.min.js.map
